language: python
python:
    - 3.7.3

install:
    - "pip install gitpython"
    - "gem install bundler jekyll"

script:
    - "python scripts/generate_about.py . ./resources/about_template.md 1"
    - "bundle exec jekyll build"

deploy:
    provider: pages
    skip-cleanup: true
    github-token: $GITHUB_TOKEN
    local_dir: _site
    on:
        branch: master
